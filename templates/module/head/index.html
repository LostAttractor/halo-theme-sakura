<th:block th:fragment="module_head">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
  <meta name="generator" content="Halo 2.0.0">

  <!--/* css */-->
  <link rel="preload" th:href="@{/assets/dist/css/main.min.css?v={version}(version=${theme.spec.version})}" as="style">
  <link rel="stylesheet" th:href="@{/assets/dist/css/main.min.css?v={version}(version=${theme.spec.version})}">

  <!--/* variables.html 根据配置设置 css 变量值，全局 css 通过变量值进行处理 */-->
  <th:block th:replace="module/variables/index" />

  <!--/* 字体 */-->
  <th:block th:replace="module/head/fonts" />
  
  <link rel="stylesheet" th:href="@{/assets/css/lib.css}" media="noexist" onload="this.media='all'" />
  <!--/* 高亮代码样式 */-->
  <link
    rel="stylesheet"
    th:href="@{/assets/dist/css/highlight-{code_pretty}.min.css(code_pretty=${theme.config.post.code_pretty})}"
    type="text/css"
    media="noexist"
    onload="this.media='all'"
  />
  <link
    th:if="${theme.config.plugin.is_aplayer}"
    rel="stylesheet"
    th:href="@{/assets/lib/APlayer/APlayer.min.css}"
    media="all"
  />
  <link
    th:if="${theme.config.plugin.katex}"
    rel="stylesheet"
    href="https://unpkg.com/katex@0.12.0/dist/katex.min.css"
    media="noexist"
    onload="this.media='all'"
  />
  <th:block th:replace="~{inc/decorate}" />

  <!--/* TODO：头部加载进度条 */-->
  <!-- <th:block th:if="${theme.config.global.pace}">
    <link rel="stylesheet" th:href="@{/assets/lib/pace/css/pace-theme-{theme}.min.css(theme=${theme.config.global.pace_theme})}">
    <script th:src="@{/assets/lib/pace/pace.min.js}"></script>
  </th:block> -->

  <!--/* 获取主题设置中的所有属性保存在 JS 变量中 */-->
  <script th:inline="javascript">
    const config = '[(${theme.config})]'
  </script>

  <!--/* 每页可变属性 */-->
  <script class="pjax" th:inline="javascript" >
    var pageData = {
      '_templateId': '[(${_templateId})]',
      [# th:if="${_templateId == 'post'}"]
      "postLastModifyTime": "[(${#dates.format(post.status.lastModifyTime, 'yyyy-MM-dd HH:mm:ss')})]",
      [/]
      'version': '[(${theme.spec.version})]',
    }
  </script>
</th:block>