var p=Object.defineProperty;var v=(s,e,t)=>e in s?p(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var y=(s,e,t)=>(v(s,typeof e!="symbol"?e+"":e,t),t);import{d as i,s as u,_ as m}from"../main.min.js";var g=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=(s,e,t,l)=>{for(var o=l>1?void 0:l?f(e,t):e,n=s.length-1,r;n>=0;n--)(r=s[n])&&(o=(l?r(e,t,o):r(o))||o);return l&&o&&g(e,t,o),o};class c{constructor(){y(this,"videoPlayer")}registerIndex(){console.log("123")}registerBackgroundChangeEvent(){const e=document.querySelector(".bg-change-js");if(!e)return;const t=document.getElementById("bg-next"),l=document.getElementById("bg-prev"),o=(u.getThemeConfig("random_image").getValue("rimage_cover_back_num",Number)||0).valueOf();t==null||t.addEventListener("click",()=>{let r=Number(e.getAttribute("data-currIndex"));o===0?r=Math.ceil(Math.random()*99):r=(r+1)%o,n(r)}),l==null||l.addEventListener("click",()=>{let r=Number(e.getAttribute("data-currIndex"));o===0?r=Math.ceil(Math.random()*99):r=(r-1+o)%o,n(r)});const n=r=>{const a=e.getAttribute("data-url");e.src=`${a}&t=${r}`,e.setAttribute("data-currIndex",`${r}`)}}registerBackgroundVideo(){const e=document.querySelector(".video-container");if(!e)return;e.insertAdjacentElement("afterbegin",document.createElement("video"));const t=e.querySelector(".video-status"),l=document.querySelector(".focusinfo"),o=e.querySelector(".video-play"),n=e.querySelector(".video-pause");o==null||o.addEventListener("click",async()=>{this.videoPlayer?this.videoPlayer.play():m(()=>import("../assets/video.es-f4d77b6d.js"),[]).then(r=>{var a;this.videoPlayer=r.default(e.querySelector("video"),{controls:!1,controlsBar:!1,children:["MediaLoader"],autoplay:!1,preload:"auto",muted:!1,loop:!1,sources:[{src:(a=u.getThemeConfig("mainScreen").getValue("bgvideo_url",String))==null?void 0:a.toString()}]}),this.videoPlayer.ready(()=>{t.innerHTML="正在载入视频 ...",t.style.bottom="0"}),this.videoPlayer.on("loadeddata",()=>{t.style.bottom="-100px",l.style.top="-999px",o.style.display="none",n.style.display="block",this.videoPlayer.play()}),this.videoPlayer.on("play",()=>{t.style.bottom="-100px",l.style.top="-999px",o.style.display="none",n.style.display="block"}),this.videoPlayer.on("pause",()=>{t.innerHTML="已暂停 ...",t.style.bottom="0",l.style.top="0",o.style.display="block",n.style.display="none"}),this.videoPlayer.on("ended",()=>{l.style.top="0",t.style.bottom="-100px",o.style.display="block",n.style.display="none",this.videoPlayer.dispose(),e.insertAdjacentElement("afterbegin",document.createElement("video")),this.videoPlayer=void 0})})}),n==null||n.addEventListener("click",()=>{this.videoPlayer&&this.videoPlayer.pause()})}}d([i(!1)],c.prototype,"registerIndex",1);d([i(!1)],c.prototype,"registerBackgroundChangeEvent",1);d([i(!1)],c.prototype,"registerBackgroundVideo",1);
