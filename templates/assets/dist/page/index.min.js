var p=Object.defineProperty;var m=(i,e,t)=>e in i?p(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var u=(i,e,t)=>(m(i,typeof e!="symbol"?e+"":e,t),t);import{d,s as a,_ as v}from"../main.min.js";var h=Object.defineProperty,g=Object.getOwnPropertyDescriptor,c=(i,e,t,n)=>{for(var o=n>1?void 0:n?g(e,t):e,s=i.length-1,r;s>=0;s--)(r=i[s])&&(o=(n?r(e,t,o):r(o))||o);return n&&o&&h(e,t,o),o};class y{constructor(){u(this,"videoPlayer")}registerArrowDown(){const e=document.querySelector(".headertop-down");e==null||e.addEventListener("click",()=>{var n;const t=((n=document.querySelector(".site-content"))==null?void 0:n.getBoundingClientRect().top)||0;window.scrollTo({top:t+ +window.pageYOffset,behavior:"smooth"})})}registerBackgroundChangeEvent(){const e=document.querySelector(".bg-change-js");if(!e)return;const t=document.getElementById("bg-next"),n=document.getElementById("bg-prev"),o=(a.getThemeConfig("random_image","rimage_cover_back_num",Number)||0).valueOf();t==null||t.addEventListener("click",()=>{let r=Number(e.getAttribute("data-currIndex"));o===0?r=Math.ceil(Math.random()*99):r=(r+1)%o,s(r)}),n==null||n.addEventListener("click",()=>{let r=Number(e.getAttribute("data-currIndex"));o===0?r=Math.ceil(Math.random()*99):r=(r-1+o)%o,s(r)});const s=r=>{const l=e.getAttribute("data-url");e.src=`${l}&t=${r}`,e.setAttribute("data-currIndex",`${r}`)}}registerBackgroundVideo(){const e=document.querySelector(".video-container");if(!e)return;e.insertAdjacentElement("afterbegin",document.createElement("video"));const t=e.querySelector(".video-status"),n=document.querySelector(".focusinfo"),o=e.querySelector(".video-play"),s=e.querySelector(".video-pause");o==null||o.addEventListener("click",async()=>{t.innerHTML=a.translate("home.video.loading","正在载入视频 ..."),t.style.bottom="0",this.videoPlayer?this.videoPlayer.play():v(()=>import("../assets/video.es-79ac801a.js"),[]).then(r=>{var l;this.videoPlayer=r.default(e.querySelector("video"),{controls:!1,controlsBar:!1,children:["MediaLoader"],autoplay:!1,preload:"auto",muted:!1,loop:!1,sources:[{src:(l=a.getThemeConfig("mainScreen","bgvideo_url",String))==null?void 0:l.toString()}]}),this.videoPlayer.on("loadeddata",()=>{t.style.bottom="-100px",n.style.top="-999px",o.style.display="none",s.style.display="block",this.videoPlayer.play()}),this.videoPlayer.on("play",()=>{t.style.bottom="-100px",n.style.top="-999px",o.style.display="none",s.style.display="block"}),this.videoPlayer.on("pause",()=>{t.innerHTML=a.translate("home.video.statu_pause","已暂停 ..."),t.style.bottom="0",n.style.top="0",o.style.display="block",s.style.display="none"}),this.videoPlayer.on("waiting",()=>{t.innerHTML=a.translate("home.video.statu_waiting","加载中 ..."),t.style.bottom="0"}),this.videoPlayer.on("canplay",()=>{t.style.bottom="-100px"}),this.videoPlayer.on("error",()=>{t.innerHTML=a.translate("home.video.statu_error","视频播放错误"),setTimeout(()=>{n.style.top="0",t.style.bottom="-100px",o.style.display="block",s.style.display="none",this.videoPlayer.dispose(),e.insertAdjacentElement("afterbegin",document.createElement("video")),this.videoPlayer=void 0},2e3)}),this.videoPlayer.on("ended",()=>{n.style.top="0",t.style.bottom="-100px",o.style.display="block",s.style.display="none",this.videoPlayer.dispose(),e.insertAdjacentElement("afterbegin",document.createElement("video")),this.videoPlayer=void 0})}).catch(r=>{console.error(r),t.innerHTML=a.translate("home.video.statu_error","视频加载失败"),t.style.bottom="0",setTimeout(()=>{t.style.bottom="-100px"},2e3)})}),s==null||s.addEventListener("click",()=>{this.videoPlayer&&this.videoPlayer.pause()})}}c([d(!1)],y.prototype,"registerArrowDown",1);c([d(!1)],y.prototype,"registerBackgroundChangeEvent",1);c([d(!1)],y.prototype,"registerBackgroundVideo",1);
