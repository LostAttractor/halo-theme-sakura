import{d,s as a,_ as m}from"../main.min.js";import"../assets/_commonjsHelpers-042e6b4d.js";var y=Object.defineProperty,g=Object.getOwnPropertyDescriptor,c=(i,o,t,r)=>{for(var n=r>1?void 0:r?g(o,t):o,s=i.length-1,e;s>=0;s--)(e=i[s])&&(n=(r?e(o,t,n):e(n))||n);return r&&n&&y(o,t,n),n};class u{registerArrowDown(){const o=document.querySelector(".headertop-down");o==null||o.addEventListener("click",()=>{var r;const t=((r=document.querySelector(".site-content"))==null?void 0:r.getBoundingClientRect().top)||0;window.scrollTo({top:t+ +window.pageYOffset,behavior:"smooth"})})}registerBackgroundChangeEvent(){const o=document.querySelector(".bg-change-js");if(!o)return;const t=document.getElementById("bg-next"),r=document.getElementById("bg-prev"),n=(a.getThemeConfig("random_image","rimage_cover_back_num",Number)||0).valueOf();t==null||t.addEventListener("click",()=>{let e=Number(o.getAttribute("data-currIndex"));n===0?e=Math.ceil(Math.random()*99):e=(e+1)%n,s(e)}),r==null||r.addEventListener("click",()=>{let e=Number(o.getAttribute("data-currIndex"));n===0?e=Math.ceil(Math.random()*99):e=(e-1+n)%n,s(e)});const s=e=>{const l=o.getAttribute("data-url");o.src=`${l}&t=${e}`,o.setAttribute("data-currIndex",`${e}`)}}registerBackgroundVideo(){const o=document.querySelector(".video-container");if(!o)return;o.insertAdjacentElement("afterbegin",document.createElement("video"));const t=o.querySelector(".video-status"),r=document.querySelector(".focusinfo"),n=o.querySelector(".video-play"),s=o.querySelector(".video-pause");let e;n==null||n.addEventListener("click",async()=>{t.innerHTML=a.translate("home.video.loading","正在载入视频 ..."),t.style.bottom="0",m(()=>import("../assets/video.es-db0fa9e7.js"),[]).then(l=>{var p;e=l.default(o.querySelector("video"),{controls:!1,controlsBar:!1,children:["MediaLoader"],autoplay:!1,preload:"auto",muted:!1,loop:!1,sources:[{src:(p=a.getThemeConfig("mainScreen","bgvideo_url",String))==null?void 0:p.toString()}]}),e.on("loadeddata",()=>{t.style.bottom="-100px",r.style.top="-999px",n.style.display="none",s.style.display="block",e.play()}),e.on("play",()=>{t.style.bottom="-100px",r.style.top="-999px",n.style.display="none",s.style.display="block"}),e.on("pause",()=>{t.innerHTML=a.translate("home.video.statu_pause","已暂停 ..."),t.style.bottom="0",r.style.top="0",n.style.display="block",s.style.display="none"}),e.on("waiting",()=>{t.innerHTML=a.translate("home.video.statu_waiting","加载中 ..."),t.style.bottom="0"}),e.on("canplay",()=>{t.style.bottom="-100px"}),e.on("error",()=>{t.innerHTML=a.translate("home.video.statu_error","视频播放错误"),setTimeout(()=>{r.style.top="0",t.style.bottom="-100px",n.style.display="block",s.style.display="none",e.dispose(),o.insertAdjacentElement("afterbegin",document.createElement("video"))},2e3)}),e.on("ended",()=>{r.style.top="0",t.style.bottom="-100px",n.style.display="block",s.style.display="none",e.dispose(),o.insertAdjacentElement("afterbegin",document.createElement("video"))})}).catch(l=>{console.error(l),t.innerHTML=a.translate("home.video.statu_error","视频加载失败"),t.style.bottom="0",setTimeout(()=>{t.style.bottom="-100px"},2e3)})}),s==null||s.addEventListener("click",()=>{e&&e.pause()})}}c([d()],u.prototype,"registerArrowDown",1);c([d()],u.prototype,"registerBackgroundChangeEvent",1);c([d()],u.prototype,"registerBackgroundVideo",1);
