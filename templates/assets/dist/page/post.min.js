import{d as m,_ as f,s as r,U as c}from"../main.min.js";var p=Object.defineProperty,T=Object.getOwnPropertyDescriptor,l=(d,e,n,o)=>{for(var t=o>1?void 0:o?T(e,n):e,i=d.length-1,s;i>=0;i--)(s=d[i])&&(t=(o?s(e,n,t):s(t))||t);return o&&t&&p(e,n,t),t};class u{async registerShareWechat(){const e=document.getElementById("qrcode");if(!e)return;(await f(()=>import("../assets/browser-21db0a97.js").then(o=>o.b),[])).toCanvas(e,e.getAttribute("data-url"),{width:120,color:{dark:"#000000",light:"#ffffff"}})}registerWordCountToast(){if(!r.getThemeConfig("post").getValue("post_word_count_toast",Boolean))return;const e=document.querySelector(".entry-content");if(!e)return;const n=c.getWordCount(e);if(n>0){const o=c.caclEstimateReadTime(n);let t="",i="NORMAL";o<=60*10?(t=(r.getThemeConfig("post").getValue("post_word_count_toast_normal",String)||"文章篇幅适中，可以放心阅读。").toString(),i="NORMAL"):o>60*10&&o<=60*30?(t=(r.getThemeConfig("post").getValue("post_word_count_toast_medium",String)||"文章比较长，建议分段阅读。").toString(),i="MEDIUM"):(t=(r.getThemeConfig("post").getValue("post_word_count_toast_difficulty",String)||"文章内容已经很陈旧了，也许不再适用！").toString(),i="DIFFICULTY");const s=c.minuteToTimeString(o);window.innerWidth<=860&&(t=""),this.createPostToast(e,`文章共 <b>${n}</b> 字，阅读完预计需要 <b>${s}</b>。${t}`,i,"word_count")}}registerEditTimeToast(e){const n=document.querySelector(".entry-content");if(!n||!r.getThemeConfig("post").getValue("post_edit_time_toast",Boolean)||!e.has("postLastModifyTime"))return;const o=e.get("postLastModifyTime"),t=new Date(o),i=new Date().getTime()-t.getTime();let s="",a="NORMAL";i<=1e3*60*60*24*30?(s=(r.getThemeConfig("post").getValue("post_edit_time_toast_normal",String)||"近期有所更新，请放心阅读！").toString(),a="NORMAL"):i>1e3*60*60*24*30&&i<=1e3*60*60*24*90?(s=(r.getThemeConfig("post").getValue("post_edit_time_toast_medium",String)||"文章内容已经有一段时间没有更新了，也许不再适用！").toString(),a="MEDIUM"):(s=(r.getThemeConfig("post").getValue("post_edit_time_toast_difficulty",String)||"文章内容已经很陈旧了，也许不再适用！").toString(),a="DIFFICULTY"),window.innerWidth<=860&&(s="");const _=c.timeAgo(i);this.createPostToast(n,`文章内容上次编辑时间于 <b>${_}</b>。${s}`,a,"last_time")}createPostToast(e,n,o,t){const s=`<div class="${t} minicode" style="background-color: ${{NORMAL:"rgba(167, 210, 226, 1)",MEDIUM:"rgba(255, 197, 160, 1)",DIFFICULTY:"rgba(239, 206, 201, 1)"}[o]}">
      <span class="content-toast">
        ${n}
      </span>
      <div class="hide-minicode">
        <span class="iconify iconify--small" data-icon="fa:times"></span>
      </div>
    </div>`;if(e.querySelector(`.${t}`))return;const g=new DOMParser().parseFromString(s,"text/html").querySelector(`.${t}`);g.querySelector(".hide-minicode").addEventListener("click",()=>{g.classList.add("hide")},{once:!0}),e.insertAdjacentElement("afterbegin",g)}}l([m(!1)],u.prototype,"registerShareWechat",1);l([m()],u.prototype,"registerWordCountToast",1);l([m()],u.prototype,"registerEditTimeToast",1);
